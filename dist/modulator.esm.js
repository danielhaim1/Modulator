/*!
 * @danielhaim/modulator - v2.2.0 - 2025-04-13
 * https://github.com/danielhaim1/modulator.git
 * Copyright (c) 2025 Daniel Haim, Licensed Apache-2.0
 */var e={d:(r,t)=>{for(var o in t)e.o(t,o)&&!e.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:t[o]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)},r={};function t(e,r,t=!1,o=null,n=100,a=null){if("function"!=typeof e)throw new TypeError("Expected a function for the first parameter");if("number"!=typeof r||isNaN(r))throw new TypeError("Expected a number for the second parameter");if("number"!=typeof r||isNaN(r))throw new TypeError("Expected a number for the second parameter (wait)");if("boolean"!=typeof t)throw new TypeError("Expected a boolean for the third parameter");if("number"!=typeof n||isNaN(n))throw new TypeError("Expected a number for the fifth parameter");if(null!==a&&("number"!=typeof a||isNaN(a)))throw new TypeError("Expected a number for the sixth parameter");if(null!==a&&a<r)throw new TypeError("Expected the sixth parameter to be greater than or equal to the second parameter");let i,f=[],u=new Map,p=0,s=!1;const c=function(...c){return new Promise((s=>{function l(e=()=>{},r=0,t=!1,o=0){const n=Date.now()-o;if("function"!=typeof e)return Promise.reject(new Error("Expected a function for the first parameter"));if("number"!=typeof r||isNaN(r)||r<=0)return Promise.reject(new Error("Expected a number for the second parameter"));if("number"!=typeof n||isNaN(n)||n<0)return Promise.reject(new Error("Invalid timeSinceLast value"));if(t||n>=r||null!==a&&n>=a)return e(),Promise.resolve(Date.now());const i=r-n;return i<=0?Promise.resolve(Date.now()):new Promise((e=>setTimeout((()=>e(Date.now())),i)))}const m=t&&!i,w=Date.now()-p,h=null!==a&&w>=a;if(clearTimeout(i),i=h?setTimeout(l,w):setTimeout((()=>l(e,r,m,p)),null!==a?a:r),m&&!h){const r=e.apply(o,c);f.push(r),u.set(JSON.stringify(c),r),u.size>n&&u.delete(u.keys().next().value),s(r),p=Date.now()}const y=u.get(JSON.stringify(c));void 0!==y&&s(y)})).finally((()=>{s&&(f=[],u.clear()),s=!1}))};return c.cancel=function(){clearTimeout(i),s=!0},c.result=function(){return f},c}e.d(r,{w:()=>t});var o=r.w;export{o as modulate};