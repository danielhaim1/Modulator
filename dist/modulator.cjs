/*!
 * @danielhaim/modulator - v2.3.0 - 2025-04-13
 * https://github.com/danielhaim1/modulator.git
 * Copyright (c) 2025 Daniel Haim, Licensed Apache-2.0
 */(()=>{"use strict";var e,n={};e=n,Object.defineProperty(e,"__esModule",{value:!0}),e.modulate=function(e,n,t=!1,l=null,r=100,o=null){if("function"!=typeof e)throw new TypeError("Expected a function for the first parameter");if("number"!=typeof n||isNaN(n)||n<0)throw new TypeError("Expected a non-negative number for the second parameter (wait)");if("boolean"!=typeof t)throw new TypeError("Expected a boolean for the third parameter");if("number"!=typeof r||isNaN(r)||r<0)throw new TypeError("Expected a non-negative number for the fifth parameter (maxCacheSize)");if(null!==o&&("number"!=typeof o||isNaN(o)||o<0))throw new TypeError("Expected null or a non-negative number for the sixth parameter (maxWait)");if(null!==o&&o<n)throw new TypeError("maxWait must be greater than or equal to wait");let u=null,a=new Map,i=[],s=null,c=null,f=0,p=0,h=null,m=null,w=null;const d=(n,t)=>{var o;const u=Date.now();p=u;const s=m,c=w;h=null,m=null,w=null;try{const u=null!==(o=null!=l?l:t)&&void 0!==o?o:null,f=e.apply(u,n);Promise.resolve(f).then((e=>{((e,n)=>{if(!(r<=0)){if(a.has(e)){const n=i.indexOf(e);n>-1&&(i.splice(n,1),i.push(e))}else{if(a.size>=r){const e=i.shift();e&&a.delete(e)}i.push(e)}a.set(e,n)}})(JSON.stringify(n),e),s&&s(e)}),(e=>{c&&c(e)}))}catch(e){c&&c(e)}},y=()=>{u=null,Date.now(),s&&d(s,c)},x=()=>{u=null},E=function(...e){const E=Date.now();f=E,s=e,c=null!=l?l:this;const b=JSON.stringify(e);if(r>0&&a.has(b)){const e=i.indexOf(b);return e>-1&&(i.splice(e,1),i.push(b)),Promise.resolve(a.get(b))}const T=t&&!u;h||(h=new Promise(((e,n)=>{m=e,w=n})));const v=h;if(u&&(clearTimeout(u),u=null),T)d(e,c),u=setTimeout(x,n);else{let e=n;if(null!==o){const n=o-(E-p);n<e&&(e=n>0?n:0)}e=Math.max(0,e),u=setTimeout(y,e)}return v};return E.cancel=function(){u&&clearTimeout(u),p=0,u=null,s=null,c=null,w&&w(new Error("Debounced function call was cancelled.")),h=null,m=null,w=null},E},module.exports=n})();
//# sourceMappingURL=modulator.cjs.map